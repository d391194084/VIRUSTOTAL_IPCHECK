name: ðŸ›¡ï¸ VT è³‡å®‰ IP æŽƒæå™¨

# è¨­å®šæ‰‹å‹•è§¸ç™¼æ©Ÿåˆ¶ï¼Œä¸¦å…è¨±è¼¸å…¥ IP
on:
  workflow_dispatch:
    inputs:
      target_ip:
        description: 'ðŸ‘‰ è«‹è¼¸å…¥è¦æŽƒæçš„ IP åœ°å€ (ä¾‹å¦‚: 82.147.84.47)'
        required: true
        type: string

jobs:
  analyze_ip:
    runs-on: ubuntu-latest
    steps:
      - name: ðŸ“¥ å–å¾—ç¨‹å¼ç¢¼
        uses: actions/checkout@v4

      - name: ðŸ è¨­å®š Python ç’°å¢ƒ
        uses: actions/setup-python@v4
        with:
          python-version: '3.10'

      - name: ðŸš€ åŸ·è¡Œ VirusTotal æŽƒæè…³æœ¬
        env:
          # å°‡å‰›å‰›è¨­å®šçš„ Secrets æ³¨å…¥ç‚ºç’°å¢ƒè®Šæ•¸
          VT_API_KEY: ${{ secrets.VT_API_KEY }}
        run: |
          python vt_scan.py ${{ github.event.inputs.target_ip }}

      - name: ðŸ“ ç”¢å‡ºæŽƒæå ±å‘Šè‡³ GitHub æ‘˜è¦é¢æ¿
        run: |
          echo "### ðŸŽ¯ æŽƒæå®Œæˆï¼š${{ github.event.inputs.target_ip }}" >> $GITHUB_STEP_SUMMARY
          echo "è«‹ç›´æŽ¥é»žæ“Šä¸‹æ–¹å€å¡Šå³ä¸Šè§’çš„è¤‡è£½æŒ‰éˆ•ï¼Œå°‡å…§å®¹è²¼çµ¦ Gem é€²è¡Œæ·±åº¦åˆ†æžï¼" >> $GITHUB_STEP_SUMMARY
          echo '```text' >> $GITHUB_STEP_SUMMARY
          cat report.md >> $GITHUB_STEP_SUMMARY
          echo '```' >> $GITHUB_STEP_SUMMARY
